- scenario: taskrunner
  name: "HighGas Storage/Gas Spam"
  description: "Stress-test gas usage with SLOAD/SSTORE + events on HighGasContract"
  config:
    seed: highgas-taskrunner
    refill_amount: 5000000000000000000      # 5 ETH in wei
    refill_balance: 1000000000000000000     # 1 ETH in wei
    refill_interval: 600                    # seconds
    total_count: 0                          # 0 = run until stopped (when using throughput)
    throughput: 20                           # task execution cycles per slot
    max_pending: 20
    max_wallets: 20
    rebroadcast: 120
    base_fee: 20                            # gwei
    tip_fee: 2                              # gwei
    tasks_config: |-
      init:
        - type: deploy
          name: highgas
          data:
            # Bytecode produced from compiling HighGasContract
            contract_file: "https://raw.githubusercontent.com/Treymsby/eth-network/refs/heads/main/spammer_scripts/contracts/build/HighGasContract.bin"
            gas_limit: 6000000
            amount: 0

      execution:
        # HighGasContract.burnGas(uint256 iterations)
        - type: call
          name: burn-gas
          data:
            target: "{contract:highgas}"
            call_abi_file: "https://raw.githubusercontent.com/Treymsby/eth-network/refs/heads/main/spammer_scripts/contracts/build/HighGasContract.abi"
            call_fn_name: "burnGas"
            call_args: ["340"]
            gas_limit: 3000000
            # Gas Waister with high tips to be prio in queue. 3M per tx * 20 = 60M
            amount: 0

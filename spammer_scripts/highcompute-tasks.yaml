- scenario: taskrunner
  name: "HighCompute CPU+Memory Spam"
  description: "Burn CPU and memory with HighComputeContract (nested loops + hashes)"
  config:
    seed: highcompute-taskrunner
    refill_amount: 5000000000000000000      # 5 ETH in wei
    refill_balance: 1000000000000000000     # 1 ETH in wei
    refill_interval: 600
    total_count: 0
    throughput: 1                           # a bit lower, this is pretty heavy
    max_pending: 10
    max_wallets: 20
    rebroadcast: 120
    base_fee: 20
    tip_fee: 2
    tasks_config: |-
      init:
        - type: deploy
          name: highcompute
          data:
            contract_file: "https://raw.githubusercontent.com/Treymsby/eth-network/refs/heads/main/spammer_scripts/contracts/build/HighComputeContract.bin"
            gas_limit: 6000000
            amount: 0

      execution:
        # HighComputeContract.burnCpuAndMemory(uint256 iterations, uint256 arraySize)
        - type: call
          name: burn-cpu-mem
          data:
            target: "{contract:highcompute}"
            call_abi_file: "https://raw.githubusercontent.com/Treymsby/eth-network/refs/heads/main/spammer_scripts/contracts/build/HighComputeContract.abi"
            call_fn_name: "burnCpuAndMemory"
            # iterations, arraySize (tune carefully: cost ~ iterations * arraySize)
            call_args: ["5", "256"]
            gas_limit: 25000000
            amount: 0

        # HighComputeContract.burnHashOnly(uint256 iterations)
        - type: call
          name: burn-hash-only
          data:
            target: "{contract:highcompute}"
            call_abi_file: "https://raw.githubusercontent.com/Treymsby/eth-network/refs/heads/main/spammer_scripts/contracts/build/HighComputeContract.abi"
            call_fn_name: "burnHashOnly"
            call_args: ["5000"]
            gas_limit: 8000000
            amount: 0
